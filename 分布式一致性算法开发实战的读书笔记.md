# raft

## 选举
1. 日志状态机模型就是类似redo log的模式记录kv对的变化过程，那么分布式一致性问题，就转换成了，如何保证所有参与节点按照同一顺序写入的问题。

2. 基于quorum机制的写入，就是一半以上的服务器写入成功就算成功。

3. n个节点，m个节点成为leader。
   那么就需要m*n（过半）个节点，又因为总票数为节点数n，所以m*n（过半）<=n
   当m=0,1时以上条件成立
   当m=2时，考虑节点为奇偶的情况
   奇数：2*（n+1）/2=n+1
   偶数：2*（n/2+1）=n+2
   此时m*n（过半）<=n不成立
   所以在总票数等于节点数的情况下只能选出一个leader。

4. raft只有两种消息
   1.Requestvote：请求其他节点给自己投票
   2.AppendEntries:增加日志，当增加为0时用作心跳

5. 逻辑时钟term。term只在选举时增加。

6. 系统启动的时候所有的节点都是follower.