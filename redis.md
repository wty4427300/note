# Redis 线程模型演进史

1. redis是一个单线程应用
   redis在处理客户端请求的时候,都是由唯一的主线程进行处理的,其中包括了请求的读取和解析,
   命令的执行和响应的回复,都是由唯一的主线程进行处理的.
   4.0版开始redis使用一些后台线程处理比较耗时的操作.例如,清理脏数据,释放超时链接,删除大key
   等等.但是网络读写和执行命令还是使用单线程来处理.
2. redis使用单线程的原因
   redis执行的是纯内存操作,瓶颈不在cpu,而是在网络和内存,单线程避免了不必要的上下文切换
   和竞争条件,也无需考虑锁的问题.单线程模型也使得代码会相对的简单.
3. redis多线程的改进
   当redis server收到一个请求的时候,会先进入io(网络)队列.多个io线程会从io队列
   里面读取请求,并进行解析,解析之后的命令就会交给redis主线程进行执行.执行后的结果
   会重新进入io队列,等待io线程将响应返回给客户端.

# 复习I/O多路复用基础知识


