# 事物的四大特性
1.原子性：是一个不可分割的整体，要么全都执行，要么全不执行。执行出错事务回滚。
2.隔离性：同一时间，只允许一个事务请求同一组数据。不同事物彼此之间没有干扰。
3。一致性：事务开始前和开始后。数据库的完整性约束没有被破坏。
4.事务完成后落盘，不能回滚。

# 事务的并发问题
脏读：事务A读取了事务B的数据，事务B回滚，A读到了脏数据。
幻读:事务A修改表A，事务B向表A插入了一条数据，事务A修改完发现表A有一条记录还没有被修改。
不可重读：事务Ａ不断的读表Ａ，事务Ｂ不断的修改表Ａ。导致事务Ａ读取到的数据不一致。

# 四大隔离级别

１．读未提交。就是读到脏数据
２．读已提交。就是要等另一个事务提交完了，才能够读取。解决了脏读问题
３．可重读。保证了每次的读到的数据一致，不管其他事务是否已经提交。解决了不可重读问题
４．串行化。开启一个序列化事务，其他事务的对数据表的写操作都会挂起。

# 全局锁
1.备份的时候需要全局锁,为了备份的逻辑视图完整性.
但是由mvcc实现可重复读是可以保证获取一致性视图的,所以可以不用全局锁.

# 表级锁
分两种:表锁,元数据锁(mdl).
表锁lock table需要显示的执行

mdl在访问一个表的时候会自动添加,以确保读写的正确性.
当对一个表做增删改查操作的时候，加 MDL 读锁
当要对表做结构变更操作的时候，加 MDL 写锁。

读锁不互斥,所以可以有多个线程对表进行增删改查
读写,写写 互斥,所以改变表结构同时间只能有一个线程执行

# 联合索引
实际生效是联合索引+主键索引
比如(a,b)+(c,b)=(a,b,c)